let json = `[{
    "name": "Прогулки по Монмартру",
    "code": "monmartre",
    "category": "foot",
    "categoryname": "Экскурсия пешком",
    "priceadult": "5500",
    "pricechild": "3000",
    "duration": "3",
    "description": "Район Монмартр, расположенный на одноименном холме, значительно отличается от других кварталов Парижа и своей историей, и атмосферой. В далеком прошлом здесь была небольшая деревня и женский монастырь. Когда Монмартр вошел в состав Парижа, его обитатели остались верны себе и сохранили деревенский уклад жизни. Затем этот живописный уголок французской столицы облюбовали художники, нашедшие здесь всё необходимое: источники вдохновения, недорогое жильё и большое количество ресторанов с дешёвым вином. Уделите немного вашего времени этому самому романтичному кварталу Парижа, и он отплатит Вам сполна — незабываемыми впечатлениями и теплыми воспоминаниями!",
    "favorite": "0",
    "capacity": "10",
    "destination": "monmartre",
    "date": "",
    "image": "assets/img/monmartre.jpeg"
}, {
    "name": "Лион с первого взгляда",
    "code": "lyon",
    "category": "foot",
    "categoryname": "Экскурсия пешком",
    "priceadult": "5000",
    "pricechild": "2500",
    "duration": "4",
    "description": "Лион подкупит вас старинными базиликами и площадями, видами с холма Фурвьер и набережной реки Сона, умением жить красиво и превращать гастрономию в религию. Вы увидите главные и секретные уголки города и поймете его девиз — «Only Lyon».",
    "favorite": "0",
    "capacity": "15",
    "destination": "lyon",
    "date": "",
    "image": "assets/img/lyon.jpeg"
}, {
    "name": "Страсбург: Франция с немецким акцентом",
    "code": "strasbourg",
    "category": "bus",
    "categoryname": "Экскурсия на автобусе",
    "priceadult": "3000",
    "pricechild": "1000",
    "duration": "2",
    "description": "За 2 часа вас ни раз восхитит красота архитектуры Страсбурга. Вы увидите, какие пышные дворцы строили потомки знаменитых фамилий. И насколько простыми, но в то же время практичными, были дома ремесленников. Я проведу вас своим любимым маршрутом, который охватывает самые красивые достопримечательности, и поделюсь историями и секретами пребывания здесь.",
    "favorite": "0",
    "capacity": "10",
    "destination": "strasbourg",
    "date": "",
    "image": "assets/img/strasbourg.jpeg"
}, {
    "name": "По сказочным улочкам Кольмара",
    "code": "colmar",
    "category": "foot",
    "categoryname": "Экскурсия пешком",
    "priceadult": "3500",
    "pricechild": "1500",
    "duration": "2",
    "description": "В Кольмаре кажется, что вы попали в волшебную сказку или на идеальную открытку — это притягательная неизведанная Европа! Во время прогулки вы увидите главные достопримечательности, узнаете о переплетении прошлого и настоящего, реального и воображаемого. И не только — я помогу почувствовать самобытность города и расскажу о его жизни изнутри.",
    "favorite": "0",
    "capacity": "10",
    "destination": "colmar",
    "date": "",
    "image": "assets/img/colmar.jpeg"
}, {
    "name": "Правда и выдумки о Марселе",
    "code": "marseilles",
    "category": "bus",
    "categoryname": "Экскурсия на автобусе",
    "priceadult": "5000",
    "pricechild": "2500",
    "duration": "3",
    "description": "Марсель настолько разнообразен и непостижим, что жители и гости города создают собственные образы этого места. На экскурсии вы поймете, что из этого — правда, что — предубеждение, а что — местная легенда. Ощутите загадочность города, совместившего в себе французские, итальянские и восточные традиции. И в результате посмотрите на Марсель по-своему через истории местных жителей.",
    "favorite": "0",
    "capacity": "5",
    "destination": "marseilles",
    "date": "",
    "image": "assets/img/marseilles.jpeg"
}, {
    "name": "Монпелье — открыть настоящую Южную Францию",
    "code": "montpellier",
    "category": "foot",
    "categoryname": "Экскурсия пешком",
    "priceadult": "4000",
    "pricechild": "2000",
    "duration": "2",
    "description": "Гуляя по малоизвестному Монпелье, вы узнаете о его богатом торговом, духовном и интеллектуальном прошлом, увидите старейшие еврейские бани, первый ботанический сад страны и факультет, на котором учился Нострадамус, попробуете местные деликатесы и дополните представление об обаятельном Юге Франции.",
    "favorite": "0",
    "capacity": "5",
    "destination": "montpellier",
    "date": "",
    "image": "assets/img/montpellier.jpeg"
}, {
    "name": "Многоликий Версаль",
    "code": "versailles",
    "category": "bus",
    "categoryname": "Экскурсия на автобусе",
    "priceadult": "6000",
    "pricechild": "3000",
    "duration": "4",
    "description": "Версаль — это не только знаменитый королевский дворец и живописные сады, но и улочки антикваров, ухоженные дома, изысканные бутики, уютные кондитерские и оживленные рынки. Я помогу раскрыть все грани этого удивительного города и понять, что значит «дышать воздухом Версаля».",
    "favorite": "0",
    "capacity": "10",
    "destination": "versailles",
    "date": "",
    "image": "assets/img/versailles.jpeg"
}, {
    "name": "Руан — средневековые врата в Нормандию",
    "code": "rouen",
    "category": "foot",
    "categoryname": "Экскурсия пешком",
    "priceadult": "7000",
    "pricechild": "4000",
    "duration": "2",
    "description": "В многогранном Руане каждый находит что-то свое, «для души». И я вам в этом помогу. Вы не только услышите множество любопытных фактов о бесстрашных викингах, отважной Жанне д’Арк и тайной символике готических соборов, но и увидите места, которые любили Клод Моне и Гюстав Флобер. А еще я порекомендую уютные заведения, где можно попробовать традиционный нормандский яблочный пирог тарт татен и свежайших нормандских устриц, не отправляясь на побережье.",
    "favorite": "0",
    "capacity": "15",
    "destination": "rouen",
    "date": "",
    "image": "assets/img/rouen.jpeg"
}, {
    "name": "Ежедневная прогулка по Парижу",
    "code": "paris",
    "category": "foot",
    "categoryname": "Экскурсия пешком",
    "priceadult": "3000",
    "pricechild": "1500",
    "duration": "2",
    "description": "На нашей дружеской прогулке вы познакомитесь с нетривиальной историей Парижа, окунетесь в романтическую атмосферу города и взглянете на него глазами местных жителей. Мы не только прогуляемся по достопримечательностям, с которых начинается Париж, но и расскажем о жизни в столице, о французском менталитете и самых вкусных местах города!",
    "favorite": "0",
    "capacity": "15",
    "destination": "paris",
    "date": "",
    "image": "assets/img/paris.jpeg"
}, {
    "name": "Ницца: любовь с первого взгляд",
    "code": "nice",
    "category": "foot",
    "categoryname": "Экскурсия пешком",
    "priceadult": "4000",
    "pricechild": "2000",
    "duration": "3",
    "description": "Любовь к городу, как и любовь вообще, — сложное, многосоставное чувство. Я покажу Ниццу такой, какой её любят местные жители и обожают приезжие. Вы убедитесь, что здесь царит обеспеченность — вовсе не публики, давно облюбовавшей Французскую ривьеру, но богатство истории и культуры. Я поделюсь с вами знаниями о судьбе Ниццы и лучшими городскими «зарисовками» на тему любви: к морским просторам, солнцу, веселью, вкусной еде и даже религии.",
    "favorite": "0",
    "capacity": "5",
    "destination": "nice",
    "date": "",
    "image": "assets/img/nice.jpeg"
}]`

function cardCreation(obj){
    excursionsContent +=
    `<div class="excursion__item">
        <div class= "excursion__img">
            <img src="${obj.image}" alt="${obj.code}"></img>
        </div>
        <div class= "excursion__card">
            <p class= "excursion__category">${obj.categoryname}</p>
            <h2 class="excursion__title" id="${obj.code}">${obj.name}</h2>
            <div class="excursion__info">
                <div class= "info__price">
                    <i class="fa-solid fa-coins"></i>
                    <div class= "priceadult">${obj.priceadult}</div>
                    <i class="fa-solid fa-coins"></i>
                    <div class= "pricechild"> ${obj.pricechild}</div>
                    <i class="fa-regular fa-clock"></i>
                    <div class= "duration">${obj.duration}</div>
                </div>
                <div class= "info__ticket">
                    <p class= "adult">Взрослый билет</p>
                    <p class= "child">Детский билет</p>
                </div>
                <div class="description">${obj.description}</div>
                <div class="container">
                    <a class="more" href="#">Подробнее</a>
                </div>
            </div>
        </div>
    </div>`;
    return excursionsContent;
}

document.addEventListener("DOMContentLoaded", function () {
    let excursions = JSON.parse(json);
    for (let excursion of excursions) {
        cardCreation(excursion);
    }
    document.getElementById("excursions__container").innerHTML = excursionsContent;
});

 //пробуем стоимость фильтр
const rangeInput = document.querySelectorAll(".filter__price_rande input"),
    priceInput = document.querySelectorAll(".filter__price_inputs input"),
    progress = document.querySelector(".filter__price_slider .progress");

let priceGap = 1000;

priceInput.forEach(input => {
    input.addEventListener("input", (e) => {
        //получаем значения из импутов двух диапазонов и их парсим в число
        let minVal = parseInt(priceInput[0].value),
            maxVal = parseInt(priceInput[1].value);
        console.log(e.target.className);

        if ((maxVal - minVal >= priceGap) && maxVal <= 8000) {
            //если активный инпут - минимальный инпут
            if (e.target.className === "filter__inputs input-min") {
                rangeInput[0].value = minVal;
                progress.style.left = (minVal / rangeInput[0].max) * 100 + "%";
            } else {
                rangeInput[1].value = maxVal;
                progress.style.right = 100 - (maxVal / rangeInput[1].max) * 100 + "%";
            }

        }
    });
});

rangeInput.forEach(input => {
    input.addEventListener("input", (e) => {
        //получаем значения из бегунков двух диапазонов и их парсим в число
        let minVal = parseInt(rangeInput[0].value),
            maxVal = parseInt(rangeInput[1].value);

        if (maxVal - minVal < priceGap) {
            //если активный ползунок - минимальный ползунок
            if (e.target.className === "filter__range_min") {
                rangeInput[0].value = maxVal - priceGap;
            } else {
                rangeInput[1].value = minVal + priceGap;
            }
        } else {
            priceInput[0].value = minVal;
            priceInput[1].value = maxVal;
            progress.style.left = (minVal / rangeInput[0].max) * 100 + "%";
            progress.style.right = 100 - (maxVal / rangeInput[1].max) * 100 + "%";
        }
    });
});

const priceInput1 = document.querySelector('#pricemax');
const priceRange1 = document.querySelector('#pricerangemax');
const priceInput0 = document.querySelector('#pricemin');
const priceRange0 = document.querySelector('#pricerangemin');

priceRange1.addEventListener('input', function () {
    priceInput1.value = priceRange1.value;
    priceInput0.value = priceRange0.value;
});
priceRange0.addEventListener('input', function () {
    priceInput0.value = priceRange0.value;
});

priceInput1.addEventListener('input', function () {
    priceRange1.value = priceInput1.value;
    priceRange0.value = priceInput0.value;
});
priceInput0.addEventListener('input', function () {
    priceRange0.value = priceInput0.value;
});


 //Логика работы фильтра

let buttonShow = document.getElementById("show");
let radioType = document.querySelectorAll('input[name="type"]');
let radioCity = document.querySelectorAll('input[name="radio1"]');
let radioDuration = document.querySelectorAll('input[name="radio2"]');
let radioPersons = document.querySelectorAll('input[name="radio"]');
let excursionsContent = "";

const inputs = document.querySelectorAll('input');

for (const input of inputs) {
    input.addEventListener('input', function () {
        let excursions = JSON.parse(json);
        let result = "";
        let result1 = "";
        let result2 = "";
        let result3 = "";
        let result4 = "";
        let result5 = "";
        excursionsContent = "";
        
        for (let excursion of excursions) {
            if (+`${excursion.priceadult}` <= +priceInput1.value) {
                result = excursions.filter((x) => x.priceadult <= priceRange1.value);
            }
        }

        for (let excursion of result) {
            if (+`${excursion.priceadult}` >= +priceInput0.value) {
                result1 = result.filter((x) => x.priceadult >= priceInput0.value);
                cardCreation(excursion);
            }
            document.getElementById("excursions__container").innerHTML = excursionsContent;
        }

        for (const radio of radioType) {
            if (radio.checked) {
                result2 = result1.filter((x) => x.category === radio.value);
                excursionsContent = "";
                for (let excursion of result2) {
                cardCreation(excursion);
                }
                document.getElementById("excursions__container").innerHTML = excursionsContent;
            }
        }

        for (const radio2 of radioPersons) {
            if (radio2.checked) {
                result3 = result2.filter((x) => x.capacity === radio2.value);
                excursionsContent = "";
                for (let excursion of result3) {
                    cardCreation(excursion);
                }
                document.getElementById("excursions__container").innerHTML = excursionsContent;
            }
        }

        for (const radio3 of radioCity) {
            if (radio3.checked) {
                result4 = result3.filter((x) => x.destination === radio3.value);
                excursionsContent = "";
                for (let excursion of result4) {
                    cardCreation(excursion);
                }
                document.getElementById("excursions__container").innerHTML = excursionsContent;
            }
        }
        for (const radio4 of radioDuration) {
            if (radio4.checked) {
                result5 = result4.filter((x) => x.duration === radio4.value);
                excursionsContent = "";
                for (let excursion of result5) {
                    cardCreation(excursion);
                }
                document.getElementById("excursions__container").innerHTML = excursionsContent;
            }
        }
    });
}

let resetText = document.querySelector(".reset__text");
console.log(resetText);

resetText.addEventListener("click", () => {
    for (const radio of radioType) {
        if (radio.checked) {
            radio.checked = false;
        }
    }
    for (const radio2 of radioPersons) {
        if (radio2.checked) {
            radio2.checked = false;
        }
    }

    for (const radio3 of radioCity) {
        if (radio3.checked) {
            radio3.checked = false;
        }
    }
    for (const radio4 of radioDuration) {
        if (radio4.checked) {
            radio4.checked = false;
        }
    }

    let excursionsContent = "";
    let excursions = JSON.parse(json);
    for (let excursion of excursions) {
        excursionsContent +=
        `<div class="excursion__item">
            <div class= "excursion__img">
                <img src="${excursion.image}" alt="${excursion.code}"></img>
            </div>
            <div class= "excursion__card">
                <p class= "excursion__category">${excursion.categoryname}</p>
                <h2 class="excursion__title" id="${excursion.code}">${excursion.name}</h2>
                <div class="excursion__info">
                    <div class= "info__price">
                        <i class="fa-solid fa-coins"></i>
                        <div class= "priceadult">${excursion.priceadult}</div>
                        <i class="fa-solid fa-coins"></i>
                        <div class= "pricechild"> ${excursion.pricechild}</div>
                        <i class="fa-regular fa-clock"></i>
                        <div class= "duration">${excursion.duration}</div>
                    </div>
                    <div class= "info__ticket">
                        <p class= "adult">Взрослый билет</p>
                        <p class= "child">Детский билет</p>
                    </div>
                    <div class="description">${excursion.description}</div>
                    <div class="container">
                        <a class="more" href="#">Подробнее</a>
                    </div>
                </div>
            </div>
        </div>`;
    }
    document.getElementById("excursions__container").innerHTML = excursionsContent;

});



//МЕНЮ-БУРГЕР

const burgerMenu = document.querySelector('.menu__burger');
const bodyMenu = document.querySelector('.menu__body');
const menuLinks = document.querySelectorAll('.menu__link')

if (burgerMenu) {
    burgerMenu.addEventListener('click', function (e) {
        document.body.classList.toggle('_lock');
        burgerMenu.classList.toggle('_active');
        bodyMenu.classList.toggle('_active');
    });
}

if (menuLinks.length > 0) {
    menuLinks.forEach(menuLink => {
        menuLink.addEventListener('click', onMenuLinkClick)
    });

    function onMenuLinkClick() {
        if (burgerMenu.classList.contains('_active')) {
            document.body.classList.remove('_lock');
            burgerMenu.classList.remove('_active');
            bodyMenu.classList.remove('_active');
        }
    }
}

//СПОЙЛЕР
const spoilers = document.querySelectorAll('.filter__subtitle_wrapper');

spoilers.forEach(spoiler => {
    spoiler.addEventListener('click', function addVisible() {
        spoiler.nextElementSibling.classList.toggle('_visible');
        spoiler.classList.toggle('minus');
    });
});

